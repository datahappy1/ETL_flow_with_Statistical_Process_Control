<!DOCTYPE html>
<!-- Created by pdf2htmlEX (https://github.com/coolwanglu/pdf2htmlex) -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8"/>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<link rel="stylesheet" href="base.min.css"/>
<link rel="stylesheet" href="fancy.min.css"/>
<link rel="stylesheet" href="main.css"/>
<script src="compatibility.min.js"></script>
<script src="theViewer.min.js"></script>
<script>
try{
theViewer.defaultViewer = new theViewer.Viewer({});
}catch(e){}
</script>
<title></title>
</head>
<body>
<div id="sidebar">
<div id="outline">
</div>
</div>
<div id="page-container">
<div id="pf1" class="pf w0 h0" data-page-no="1"><div class="pc pc1 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg1.png"/><div class="t m0 x1 h1 y1 ff1 fs0 fc0 sc0 ls0 ws0">Get your ETL flow under </div><div class="t m0 x1 h1 y2 ff1 fs0 fc0 sc0 ls0 ws0">statistical process control</div><div class="t m0 x1 h2 y3 ff2 fs1 fc1 sc0 ls0 ws0">Pavel Prudky  14.4.2018</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf2" class="pf w0 h0" data-page-no="2"><div class="pc pc2 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg2.png"/><div class="t m0 x1 h3 y4 ff1 fs2 fc0 sc0 ls0 ws0">Introduction</div><div class="t m0 x1 h4 y5 ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _0"> </span><span class="ff2 fs4 fc1">Who am I ? Who am I not ?</span></div><div class="t m0 x1 h4 y6 ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _0"> </span><span class="ff2 fs4 fc1">What are the possible reasons for building this solution ?</span></div><div class="t m0 x2 h4 y7 ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _1"> </span><span class="ff2 fs4 fc1">ETL Processing issues !!!</span></div><div class="t m0 x1 h4 y8 ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _0"> </span><span class="ff2 fs4 fc1">What are we building ?</span></div><div class="t m0 x2 h4 y9 ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _1"> </span><span class="ff2 fs4 fc1">Custom Data - driven alerting project based on 3 sigma rule calculation</span></div><div class="t m0 x3 h4 ya ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _2"> </span><span class="ff2 fs4 fc1">Row counts and Processing durations per file per specific staging areas</span></div><div class="t m0 x1 h4 yb ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _0"> </span><span class="ff2 fs4 fc1">Why and when to choose this solution ?</span></div><div class="t m0 x2 h4 yc ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _1"> </span><span class="ff2 fs4 fc1">If we want to stay on top of things</span></div><div class="t m0 x2 h4 yd ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _1"> </span><span class="ff2 fs4 fc1">If we need to manage hypercare period for a specific customer</span></div><div class="t m0 x2 h4 ye ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _1"> </span><span class="ff2 fs4 fc1">If we like building our custom solutions where we fully define all the logic</span></div><div class="t m0 x2 h4 yf ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _1"> </span><span class="ff2 fs4 fc1">If we need this now</span></div><div class="t m0 x2 h4 y10 ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _1"> </span><span class="ff2 fs4 fc1">If ElasticSearch already installed </span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf3" class="pf w0 h0" data-page-no="3"><div class="pc pc3 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg3.png"/><div class="t m0 x1 h3 y4 ff1 fs2 fc0 sc0 ls0 ws0">Statistical process control and ETL logging</div><div class="t m0 x4 h2 y11 ff3 fs5 fc2 sc0 ls0 ws0"><span class="_ _3"> </span><span class="ff2 fs1 fc1">Theoretical statistical process control and the 3 sigma rule</span></div><div class="t m0 x5 h4 y12 ff3 fs3 fc2 sc0 ls0 ws0"><span class="_ _1"> </span><span class="ff2 fs4 fc1">Three-sigma limit (3-sigma limits) is a statistical calculation that refers to data within three standard deviations </span></div><div class="t m0 x6 h4 y13 ff2 fs4 fc1 sc0 ls0 ws0">from a mean. In business applications, three-sigma refers to processes that operate efficiently and produce </div><div class="t m0 x6 h4 y14 ff2 fs4 fc1 sc0 ls0 ws0">items of the highest quality. The so-called three-sigma rule of thumb expresses a conventional heuristic that </div><div class="t m0 x6 h4 y15 ff2 fs4 fc1 sc0 ls0 ws0">nearly all values are taken to lie within three standard deviations of the mean, and thus it is empirically useful </div><div class="t m0 x6 h4 y16 ff2 fs4 fc1 sc0 ls0 ws0">to treat 99.7% probability as near <span class="_ _4"></span>certainty. </div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf4" class="pf w0 h0" data-page-no="4"><div class="pc pc4 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg4.png"/><div class="t m0 x1 h3 y4 ff1 fs2 fc0 sc0 ls0 ws0">10000 ft overview of the proposed solution</div><div class="t m0 x7 h2 y17 ff3 fs5 fc2 sc0 ls0 ws0"><span class="_ _3"> </span><span class="ff2 fs1 fc1">High level summary </span></div><div class="t m0 x8 h1 y18 ff1 fs0 fc3 sc1 ls0 ws0">1.</div><div class="t m0 x9 h1 y19 ff1 fs0 fc4 sc2 ls0 ws0">1.</div><div class="t m0 xa h1 y1a ff1 fs0 fc3 sc1 ls0 ws0">2.</div><div class="t m0 xb h1 y1b ff1 fs0 fc4 sc2 ls0 ws0">2.</div><div class="t m0 xc h1 y1a ff1 fs0 fc3 sc1 ls0 ws0">3.</div><div class="t m0 xd h1 y1b ff1 fs0 fc4 sc2 ls0 ws0">3.</div><div class="t m0 xe h1 y18 ff1 fs0 fc3 sc1 ls0 ws0">4.</div><div class="t m0 xf h1 y19 ff1 fs0 fc4 sc2 ls0 ws0">4.</div><div class="t m0 x10 h1 y1a ff1 fs0 fc3 sc1 ls0 ws0">5.</div><div class="t m0 x11 h1 y1b ff1 fs0 fc4 sc2 ls0 ws0">5.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf5" class="pf w0 h0" data-page-no="5"><div class="pc pc5 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg5.png"/><div class="t m0 x1 h3 y1c ff1 fs2 fc0 sc0 ls0 ws0">Stepping in a bit deeper inside the </div><div class="t m0 x1 h3 y1d ff1 fs2 fc0 sc0 ls0 ws0">components used</div><div class="t m0 x12 h5 y1e ff3 fs6 fc2 sc0 ls0 ws0"><span class="_ _5"> </span><span class="ff2 fs7 fc1">Overview of the components used:</span></div><div class="t m0 x13 h6 y1f ff3 fs8 fc2 sc0 ls0 ws0"><span class="_ _6"> </span><span class="ff2 fs9 fc1">SQL Server 2017 Dev Edition</span></div><div class="t m0 x14 h7 y20 ff3 fsa fc2 sc0 ls0 ws0"><span class="_ _7"> </span><span class="ff2 fsb fc1">Why Dev Edition and not SQL Express? Limitations wrapup</span></div><div class="t m0 x13 h6 y21 ff3 fs8 fc2 sc0 ls0 ws0"><span class="_ _6"> </span><span class="ff2 fs9 fc1">Winlogbeat</span></div><div class="t m0 x14 h7 y22 ff3 fsa fc2 sc0 ls0 ws0"><span class="_ _7"> </span><span class="ff2 fsb fc1">A module inside of the Elastic stack. Winlogbeat ships Windows event logs to Elasticsearch or Logstash. You can install it as a </span></div><div class="t m0 x15 h8 y23 ff2 fsb fc1 sc0 ls0 ws0">Windows service. It can <span class="_ _4"></span>capture event data from any event logs running on your system. For example, you can capture events </div><div class="t m0 x15 h8 y24 ff2 fsb fc1 sc0 ls0 ws0">such as:</div><div class="t m0 x16 h9 y25 ff3 fsc fc2 sc0 ls0 ws0"><span class="_ _8"> </span><span class="ff2 fsd fc1">application events</span></div><div class="t m0 x16 h9 y26 ff3 fsc fc2 sc0 ls0 ws0"><span class="_ _8"> </span><span class="ff2 fsd fc1">hardware events</span></div><div class="t m0 x16 h9 y27 ff3 fsc fc2 sc0 ls0 ws0"><span class="_ _8"> </span><span class="ff2 fsd fc1">security events</span></div><div class="t m0 x16 h9 y28 ff3 fsc fc2 sc0 ls0 ws0"><span class="_ _8"> </span><span class="ff2 fsd fc1">system events</span></div><div class="t m0 x13 h6 y29 ff3 fs8 fc2 sc0 ls0 ws0"><span class="_ _6"> </span><span class="ff2 fs9 fc1">Elasticsearch</span></div><div class="t m0 x14 h7 y2a ff3 fsa fc2 sc0 ls0 ws0"><span class="_ _7"> </span><span class="ff2 fsb fc1">Elasticsearch is a distributed, RESTful search and analytics engine capable of solving a growing number of use cases. As the heart </span></div><div class="t m0 x15 h8 y2b ff2 fsb fc1 sc0 ls0 ws0">of the Elastic Stack, it centrally stores your data so you can discover the expected and uncover the unexpected.</div><div class="t m0 x13 h6 y2c ff3 fs8 fc2 sc0 ls0 ws0"><span class="_ _6"> </span><span class="ff2 fs9 fc1">Kibana</span></div><div class="t m0 x14 h7 y2d ff3 fsa fc2 sc0 ls0 ws0"><span class="_ _7"> </span><span class="ff2 fsb fc1">Kibana is a made up word. Kibana will be used as our ElasticSearch visualization tool for the events we will be looking for. This tool </span></div><div class="t m0 x15 h8 y2e ff2 fsb fc1 sc0 ls0 ws0">has many features out of which we’ll utilize only the <span class="_ _9"></span>Time series chart to <span class="_ _4"></span>get us started (maybe also a simple dashboard) , <span class="_ _9"></span>but I </div><div class="t m0 x15 h8 y2f ff2 fsb fc1 sc0 ls0 ws0">expect , that in case this solution got your interest, you’ll want to do more with this tool.  </div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf6" class="pf w0 h0" data-page-no="6"><div class="pc pc6 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg6.png"/><div class="t m0 x1 h3 y4 ff1 fs2 fc0 sc0 ls0 ws0">The fun part : let’s go build this</div><div class="t m0 x17 ha y30 ff3 fse fc2 sc0 ls0 ws0"><span class="_ _a"> </span><span class="ff2 fsf fc1">Demonstration</span></div><div class="t m0 x18 ha y31 ff3 fse fc2 sc0 ls0 ws0"><span class="_ _b"></span><span class="ff2 fsf fc1">Start the services / apps ( SQL Server , SQL Agent, Winlogbeat, </span></div><div class="t m0 x19 ha y32 ff2 fsf fc1 sc0 ls0 ws0">ElasticSearch, Kibana )</div><div class="t m0 x18 ha y33 ff3 fse fc2 sc0 ls0 ws0"><span class="_ _b"></span><span class="ff2 fsf fc1">Revision of the SQL code</span></div><div class="t m0 x18 ha y34 ff3 fse fc2 sc0 ls0 ws0"><span class="_ _b"></span><span class="ff2 fsf fc1">Revision of the raised events in Event Log Viewer</span></div><div class="t m0 x18 ha y35 ff3 fse fc2 sc0 ls0 ws0"><span class="_ _b"></span><span class="ff2 fsf fc1">Winlogbeat.yaml – filtering out only the needed events, </span></div><div class="t m0 x19 ha y36 ff2 fsf fc1 sc0 ls0 ws0">Elasticsearch endpoint check</div><div class="t m0 x18 ha y37 ff3 fse fc2 sc0 ls0 ws0"><span class="_ _b"></span><span class="ff2 fsf fc1">Kibana index filters, Timeline, Dashboard</span></div><div class="t m0 x18 ha y38 ff3 fse fc2 sc0 ls0 ws0"><span class="_ _b"></span><span class="ff2 fsf fc1">Let’s start raising events…</span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf7" class="pf w0 h0" data-page-no="7"><div class="pc pc7 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg7.png"/><div class="t m0 x1 h3 y4 ff1 fs2 fc0 sc0 ls0 ws0">Wrapping up</div><div class="t m0 x1 hb y39 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _8"> </span><span class="ff2 fs11 fc1">Pros </span></div><div class="t m0 x2 hb y3a ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">With just a few hours of work, you can get a lot of control in your data </span></div><div class="t m0 x1a hb y3b ff2 fs11 fc1 sc0 ls0 ws0">processing framework, you can definitely be informed in advance when </div><div class="t m0 x1a hb y3c ff2 fs11 fc1 sc0 ls0 ws0">something fails and react in advance as well. There isn’t a very steep learning </div><div class="t m0 x1a hb y3d ff2 fs11 fc1 sc0 ls0 ws0">curve in this case, things seem to work well with plenty of documentation </div><div class="t m0 x1a hb y3e ff2 fs11 fc1 sc0 ls0 ws0">available online.</div><div class="t m0 x2 hb y3f ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">In case your company has ElasticSearch cluster in place, you will be able to </span></div><div class="t m0 x1a hb y40 ff2 fs11 fc1 sc0 ls0 ws0">snap-in with a rather small effort needed</div><div class="t m0 x2 hb y41 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">You can build on top of this. This is really just a first step that you can align to </span></div><div class="t m0 x1a hb y42 ff2 fs11 fc1 sc0 ls0 ws0">your needs. You can enhance this with other events, for example sending jobs </div><div class="t m0 x1a hb y43 ff2 fs11 fc1 sc0 ls0 ws0">with failed statuses, extend this to start raising events regarding jobs that are </div><div class="t m0 x1a hb y44 ff2 fs11 fc1 sc0 ls0 ws0">long-running even before they finish</div><div class="t m0 x2 hb y45 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">You can easily utilize the rest of the Elastic Stack components to extend this </span></div><div class="t m0 x1a hb y46 ff2 fs11 fc1 sc0 ls0 ws0">solution</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf8" class="pf w0 h0" data-page-no="8"><div class="pc pc8 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg8.png"/><div class="t m0 x1 h3 y4 ff1 fs2 fc0 sc0 ls0 ws0">Wrapping up</div><div class="t m0 x1 hb y47 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _8"> </span><span class="ff2 fs11 fc1">Cons</span></div><div class="t m0 x2 hb y48 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">This solution works well in an environment, where you already have a lot of ETL </span></div><div class="t m0 x1a hb y49 ff2 fs11 fc1 sc0 ls0 ws0">logging information collected from the past, where one slightly different size </div><div class="t m0 x1a hb y4a ff2 fs11 fc1 sc0 ls0 ws0">file or some network glitch causing longer stage processing doesn’t skew your </div><div class="t m0 x1a hb y4b ff2 fs11 fc1 sc0 ls0 ws0">mean and also the 3 sigma control limits.</div><div class="t m0 x2 hb y4c ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">You need to have a little more in-depth knowledge of Elasticsearch in case </span></div><div class="t m0 x1a hb y4d ff2 fs11 fc1 sc0 ls0 ws0">your team will be managing this pipeline</div><div class="t m0 x2 hb y4e ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">For more in depth analytics, Kibana has a slight learning curve as <span class="_ _b"></span>well</span></div><div class="t m0 x2 hb y4f ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">Kibana is not perfect</span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pf9" class="pf w0 h0" data-page-no="9"><div class="pc pc9 w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bg9.png"/><div class="t m0 x1 h3 y4 ff1 fs2 fc0 sc0 ls0 ws0">Wrapping up</div><div class="t m0 x1 hb y50 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _8"> </span><span class="ff2 fs11 fc1">Other solutions to this problem</span></div><div class="t m0 x2 hb y51 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">Use Python script to query out of the logger_history table SCP outliers and pass </span></div><div class="t m0 x1a hb y52 ff2 fs11 fc1 sc0 ls0 ws0">them directly to ElasticSearch webservice</div><div class="t m0 x2 hb y53 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">Sumologic and other <span class="_ _4"></span>Log monitoring and analysis frameworks ( in case it has </span></div><div class="t m0 x1a hb y54 ff2 fs11 fc1 sc0 ls0 ws0">outlier detection )</div><div class="t m0 x1 hb y55 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _8"> </span><span class="ff2 fs11 fc1">My tips</span></div><div class="t m0 x2 hb y56 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">Make sure you send from Winlogbeat to Elasticsearch only the events <span class="_ _b"></span>YOU <span class="_ _4"></span>are </span></div><div class="t m0 x1a hb y57 ff2 fs11 fc1 sc0 ls0 ws0">generating</div><div class="t m0 x2 hb y58 ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">Make sure you have enough <span class="_ _4"></span>data collected to get meaningful results out of </span></div><div class="t m0 x1a hb y59 ff2 fs11 fc1 sc0 ls0 ws0">this project. Calculations Data <span class="_ _4"></span>quality will rise over time so don’t be worried if </div><div class="t m0 x1a hb y5a ff2 fs11 fc1 sc0 ls0 ws0">positive outlier events<span class="_ _4"></span> show up</div><div class="t m0 x2 hb y5b ff3 fs10 fc2 sc0 ls0 ws0"><span class="_ _c"> </span><span class="ff2 fs11 fc1">Sell this solution well and react to the raised events</span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
<div id="pfa" class="pf w0 h0" data-page-no="a"><div class="pc pca w0 h0"><img class="bi x0 y0 w0 h0" alt="" src="bga.png"/><div class="t m0 x1 h3 y4 ff1 fs2 fc0 sc0 ls0 ws0">Q&amp;A</div><div class="t m0 x1 hc y5c ff3 fs12 fc2 sc0 ls0 ws0"><span class="_ _d"></span><span class="ff2 fs13 fc1">Thank you very much for your attention</span></div><div class="t m0 x1 hc y5d ff3 fs12 fc2 sc0 ls0 ws0"><span class="_ _d"></span><span class="ff2 fs13 fc1">Please feel free to ask questions</span></div><div class="t m0 x1 hc y5e ff3 fs12 fc2 sc0 ls0 ws0"><span class="_ _d"></span><span class="ff2 fs13 fc1">Pavel Prudky</span></div><div class="t m0 x1 hc y5f ff3 fs12 fc2 sc0 ls0 ws0"><span class="_ _d"></span><span class="ff2 fs13 fc1">prudkypav@gmail.com</span></div><div class="t m0 x1 hc y60 ff3 fs12 fc2 sc0 ls0 ws0"><span class="_ _d"></span><span class="ff2 fs13 fc1">Linkedin</span></div><div class="t m0 x1 hc y61 ff3 fs12 fc2 sc0 ls0 ws0"><span class="_ _d"></span><span class="ff2 fs13 fc1">datahappy.wordpress.com   <span class="_ _4"></span>&lt;-  download the solution 15.4 </span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
</div>
<div class="loading-indicator">

</div>
</body>
</html>
